# Process Synchronization 3

이 챕터는 교재에 나와있지 않은 내용이라 강의를 들으면서 정리했습니다. ✍

<br>

### Classical Problems of Synchronization

+ Bounded-Buffer Problem (Producer-Consumer Problem)
+ Readers and Writers Problem
+ Dining-Philosophers Problem

<br>

![image](https://user-images.githubusercontent.com/62419307/115148645-84018800-a09b-11eb-9e70-f7d5b1ec105e.png)

Producer와 Consumer는 각각 하나씩이 아니라 여러 개가 있음. 

+ Producer: 공유 버퍼에 데이터를 만들어서 집어 넣는 역할. 주황색이 데이터가 있는 버퍼라고 생각하면 된다. 
+ Consumer: 데이터가 있는 버퍼를 사용하는 역할. 비어있는 버퍼들은 Producer가 아직 넣지 못했거나 Consumer가 이미 사용한 경우이다.

#### Synchronization에서 발생하는 문제점

1. **동시성 문제**
   + Producer가 두 개 이상 도착해서 비어있는 버퍼를 동시에 발견했을 때 데이터를 만들어서 집어넣는 작업을 했을 때 생긴다. 
     따라서 그냥 집어넣는 작업을 하는 게 아니라 lock을 걸어서 다른 프로세스의 개입을 막아야 한다.
   + Consumer가 두 개 이상이 동시에 데이터를 꺼내려고 할 때도 문제가 생긴다. 
     마찬가지로 데이터를 꺼낼 때 lock을 걸어서 다른 프로세스를 막는다.

<br>

2. **버퍼의 유한성**
   + Producer가 모든 빈 버퍼를 채웠을 때 Consumer 대신에 Producer만 계속 온다면 버퍼는 이미 가득찼기 때문에 Producer 입장에서는 사용할 수 있는 자원이 없는 것으로 간주함. 
     ✔ Semaphore의 관점으로 본다면 빈 버퍼가 Producer에게는 자원이 된다.
   + Consumer 입장에서도 마찬가지로 Consumer만 계속 등장해서 모든 자원을 사용한다면 데이터가 있는 버퍼가 없기 때문에 Producer를 기다리게 된다.

<br>

그래서 Semaphore로 해결하려면 두 가지 방법이 있다.

1. 공유데이터에 접근할 때 lock을 걸고 반납 시 lock을 풀어준다.

2. 가용자원의 개수를 세야한다.