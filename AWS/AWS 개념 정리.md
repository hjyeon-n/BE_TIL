# AWS 개념 정리 🙋‍♀️

AWS 배포가 처음이라 우당탕탕 얼렁뚱땅했기에 이제 다시 그 과정을 차근차근 정리하려고 한다🤸‍♀️

과정은 심플하게 2단계이다. 

1. 인스턴스(EC2), RDS 생성
2. 서버에 프로젝트 업로드

하지만 EC2는 뭐고... 리전은 무엇이며 IAM은 무엇인가... 🤯 

그리고 엄청나게 많은 에러들도 만났다... 하지만 우린 얼은이니까 울진 않았다 (대충 멋진 포즈) 이 부분은 @kong0527이 정리했다.

시간이 허락한다면 개념 정리와 별도로 배포 과정에서 만났던 새로 알게 된 것들도 따로 정리하려고 한다.

<br>

### 우선, AWS가 뭐지?

**Amazon Web Services** (AWS)는 Amazon에서 클라우드 컴퓨팅이라고 알려진 웹 서비스 형태로 기업에 IT 인프라를 제공하는 서비스이다. 이 서비스는 최종 사용자에 직접 공개되는 것이 아니고, 다른 개발자가 사용 가능한 기능을 제공하는 플랫폼을 제공하는 PaaS(Platform as a Service)이다.

#### ➕ 클라우드 컴퓨팅... 어디서 많이 들어봤는데...

클라우드 컴퓨팅은 IT 리소스를 인터넷을 통해 온디맨드로 제공하고 사용한 만큼만 비용을 지불하는 것을 말한다. 물리적 데이터 센터와 서버를 구입, 소유 및 유지 관리하는 대신, Amazon Web Services(AWS)와 같은 클라우드 공급자로부터 필요에 따라 컴퓨팅 파워, 스토리지, 데이터베이스와 같은 기술 서비스에 액세스할 수 있다. [참고](https://aws.amazon.com/ko/what-is-cloud-computing/)

<br>

### EC2 

Elastic Compute Cloud의 약자로, AWS의 핵심 서비스이다. 아마존이 서비스를 제공하는 리전에서 **가상의 컴퓨터를 임대하는 개념**이다.쉽게 생각해서 한대의 컴퓨터를 임대해주는 것이라고 생각하자.🖥 여기에 자신이 선호하는 운영체제를 설치하고, 웹서비스를 위한 프로그램들(웹서버, 데이터베이스 등)을 설치하면 된다. AWS에서는 URL(Public DNS)을 제공하는데, 이 URL을 통해서 웹서비스를 하거나, 자신이 구입한 도메인을 붙여서 서비스 할 수도 있다. 🤓

컴퓨터를 사용하면 프로그램도 설치하고, 파일도 저장하고, 설정도 변경하게 되는데, 이 상태 그대로 저장 할 수 있다. 이것을 **이미지**라고 한다. 이미지를 이용해서 새로운 컴퓨터를 만들면 이미지에 저장된 상태와 똑같은 컴퓨터를 생성할 수 있다. 컴퓨터를 장만할 때마다 반복되는 설치 작업을 하지 않게 되는 것이다. 

인스턴스는 즉, 한 대의 컴퓨터라고 생각하면 된다😏 인스턴스 생성 후 이 인스턴스에 제어하기 위해서는 이 인스턴스의 주소 즉, URL에 접근해야 한다. 이 과정은 원격으로 이루어지기 때문에 SSH 접속이 필요하다. 우리는 putty를 사용했다.

<br>

### Region

흔히 리전이라고 불리는 Region은 말 그대로 **서버의 물리적인 위치**(지역)를 의미한다. 즉, 사용자와 가까운 지역을 설정하는 것이고 거리가 멀면 멀수록 속도가 느려진다고 생각하면 된다. 여러 국가에 서비스를 하려면 여러 리전을 두면 된다. 재해에 대비해 여러 리전을 두는 경우도 있다.

#### ➕ AZ도 들어봤는데...

AZ는 **가용영역**__(Availability Zone)__을 말하며, **리전안에 있는 IDC**(데이터센터)를 의미한다. 기본적으로 AWS의 각 리전안에는 2개 이상의 가용영역을 가지고 있다. [참고 링크! 다른 용어도 잘 정리되어 있다](https://web-front-end.tistory.com/74)

<br>

### S3

온라인 스토리지 웹 서비스로, 쉽게 말해서 사용한 만큼 돈을 내는 웹하드라고 생각하면 된다. 주로 **데이터를 백업하거나 2차 분석을 위한 로그 데이터를 저장하는 용도**로 사용한다.여러 개의 application이 동시에 접근할 수 있다는 장점이 있다. 

EC2를 이용해서 파일 서버를 만들 수 있는데 왜 S3를 이용할까? 🙄 파일서버를 만들려면, EC2에는 하드 용량 제한이 있기 때문에 용량을 벗어나면 확장해야 하지만, S3를 이용하면 그러한 절차 없이 무제한으로 사용 가능하다. 우리는 별도로 두지 않고 EBS만을 이용했다.

#### 주요특징

- 많은 사용자가 접속을 해도 이를 감당하기 위해서 시스템적인 작업을 하지 않아도 된다.
- 저장할 수 있는 파일 수의 제한이 없다. 
- 최소 1바이트에서 최대 5TB의 데이터를 저장하고 서비스 할 수 있다. 
- 파일에 인증을 붙여서 무단으로 엑세스 하지 못하도록 할 수 있다. 
- 데이터를 여러 시설에서 중복으로 저장해 데이터의 손실이 발생할 경우 자동으로 복원한다.
- 버전관리 기능을 통해서 사용자에 의한 실수도 복원이 가능하다.
- 정보의 중요도에 따라서 보호 수준을 차등할 수 있고, 이에 따라서 비용을 절감 할 수 있다. (RSS)

#### 주요개념

🔎 **객체**

AWS는 S3에 저장된 데이터 각각을 객체라고하는데, 쉽게 말해서 각각의 파일이라고 생각하면 된다.  

🔎 **버킷**

객체가 파일이라면 버킷은 연관된 객체들을 그룹핑한 최상위 디렉토리라고 할 수 있다. 버킷 단위로 지역(region)을 지정 할 수 있고, 또 버킷에 포함된 모든 객체에 대해서 일괄적으로 인증과 접속 제한을 걸 수 있다. 

[참고1](https://acstory.tistory.com/42?category=802366) / [참고2](https://m.blog.naver.com/PostView.nhn?blogId=kbh3983&logNo=220978884150&proxyReferer=https:%2F%2Fwww.google.com%2F)

<br>

### EBS

EBS란 Elastic Block Store의 약자로 일종의 **하드디스크**라고 생각하면 된다. 

- 필요에 따라서 즉시 생성하고, 제거할 수 있다.
- 내부적으로 데이터를 실시간 복제하고 있기 때문에 하드디스크에 비해서 데이터를 잃어버릴 확률이 현저히 낮다.
- 스냅샷 기능을 제공해서 EBS의 현재 상태 그대로 보존 할 수 있다.

#### ➕ 스냅샷? 그게 뭐지? 📸

특정 시간에 데이터 저장 장치의 상태를 별도의 파일이나 이미지로 저장하는 기술로, 스냅샷 기능을 이용하여 데이터를 저장하면 유실된 데이터 복원과 일정 시점의 상태로 데이터를 복원할 수 있다. [참고](https://choseongho93.tistory.com/189)

#### ➕ Volume은 또 뭐야 🤷‍♀️

EBS로 생성한 디스크 하나 하나를 볼륨이라고 부른다.

<br>

### 드디어 아는 거 나왔다! RDS

Relational Database Service의 약자로 AWS에서 제공하는 **데이터베이스 전용 서비스**다. 데이터베이스를 운영 하기 위해서 필요한 복제, 백업, 장애복구와 같은 작업을 대행해준다. 아마존 오로라, mysql,  MariaDB, PostgreSQL, Oracle 등을 지원한다. 우리는 MariaDB를 사용했다. 💃

<br>

### 보안 그룹 설정

 AWS 인스턴스에 대한 Inbound와 Outbound에 대한 패킷을 **포트 번호로 제어하기 위한 설정**이다. 예를 들어, EC2 인스턴스에 웹서버를 구축한 경우에는 웹 서버는 인터넷상에 HTML 파일을 공개하기 위한 서버로 HTTP프로토콜(80번 포트)을 사용하여 통신한다. 그러므로 80번 포트에 관련된 통신만 허용하고 이외의 통신은 차단해야한다.

🔒 인바운드: 인터넷을 포함한 외부 네트워크에서 EC2 인스턴스로 향하는 정책

🔒 아웃바운드: EC2 인스턴스에서 인터넷을 포함한 외부 네트워크로 향하는 통신 정책

[참고! 인바운드 설정과 아웃바운드 설정도 잘 나와있다](https://m.blog.naver.com/PostView.nhn?blogId=ensof&logNo=221341487623&proxyReferer=https:%2F%2Fwww.google.com%2F)

<br>

### IAM

AWS Identity and Access Management(IAM)는 AWS 리소스에 대한 **액세스를 안전하게 제어할 수 있는 웹 서비스**이다. IAM을 사용하여 리소스를 사용하도록 인증(로그인) 및 권한 부여(권한 있음)된 대상을 제어한다. 

어떤 IAM 계정은 EC2 서비스만 접근할 수 있도록 권한을 부여하고, 다른 IAM 계정은 S3 서비스만 접근할 수 있도록 권한을 나눌 수 있다. IAM 계정이 없다면 AWS 계정 자체가 모든 서비스에 대한 권한이 있기 때문에 보안상 취약하다. 

따라서 IAM 계정을 생성해서 각 IAM 계정에 필요한 권한만 갖도록 설정할 수 있다. 또한, IAM 계정은 access key를 개별적으로 관리할 수 있기 때문에 보안성이 높아진다.

[참고! 정리가 잘 되어있고, IAM 그룹 생성 설명도 잘 나와있다](https://victorydntmd.tistory.com/67)

<br>

대충 용어 정리는 이정도면 된 것 같다. 물론, 아직 부족한 게 많아서 차차 늘려갈 계획이다.😉

전반적으로 참고한 링크는 따로 정리한다. 세상엔 참 똑똑한 사람들이 많다.😎

[참고1](https://velog.io/@matisse/AWS-%EB%B0%B0%ED%8F%AC-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC)

[참고2](https://opentutorials.org/course/608/3002)