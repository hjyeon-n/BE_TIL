# 생성 패턴 (Creational Pattern) 😏

객체를 생성하는데 관련된 패턴들

- 객체가 생성되는 과정의 유연성을 높이고 코드의 유지를 쉽게 한다.

<br>

#### 🖐 여기서 잠깐❗

코드로는 따로 정리된 게 없으니 **참고자료 출처에서 꼭 확인해 볼 것**🔥

<br>

### 팩토리 메소드 패턴 (Factory Methon Pattern)⚡

팩토리 메서드 패턴은 클래스의 인스턴스를 만드는 일을 서브 클래스에게 위임한다. 객체의 생성 코드를 별도의 클래스/메소드로 분리함으로써 객체 생성의 변화에 대비하는 데 유용하다. 팩토리 메서드가 객체 생성을 처리하며, 객체를 생성하는 코드를 캡슐화한다. 서브 클래스에서 어떤 클래스를 만들지 결정하므로써 객체 생성을 캡슐화한다. 이렇게 하면 슈퍼클래스에 있는 클라이언트 코드와 서브클래스에 있는 객체 생성 코드를 분리시킬 수 있다.

![image](https://user-images.githubusercontent.com/62419307/90525500-4e25a000-e1aa-11ea-8a75-39a69795056a.png)

팩토리 메서드 패턴을 사용하는 이유는 **클래스 간의 결합도를 낮취기 위해서다.** 클래스에 변경이 생겼을 때 다른 클래스에 영향을 덜 주기 때문이다. 그리고 객체생성 코드를 전부 하나의 객체 또는 메소드에 구현하기 때문에 코드에 중복되는 내용을 제거할 수 있고, 수정에도 용이하다. 

<br>

### 추상 팩토리 패턴 (Abstract Factory Pattern) 🛠

구체적인 클래스에 의존하지 않고 서로 연관되거나 의존적인 객체들의 조합을 만드는 인터페이스를 제공하는 패턴

#### 팩토리 패턴이랑 무슨 차이지? 🙋‍♀️

- 팩토리 메서드 패턴
- 조건에 따른 객체 생성을 팩토리 클래스로 위임하여, 팩토리 클래스에서 객체를 생성하는 패턴 

- 추상 팩토리 패턴
- 서로 관련이 있는 객체들을 통째로 묶어서 팩토리 클래스로 만들고, 이들 팩토리를 조건에 따라 생성하도록 다시 팩토리를 만들어서 객체를 생성하는 패턴

✔ 간단하게 말해서 **추상 팩토리 패턴은 팩토리 메서드 패턴을 좀 더 캡슐화한 방식**이라고 볼 수 있다.



대표적인 예로는 특정 라이브러리를 배포할 때 OS별로 지원하는 기능이 다르다면 추상 팩토리 패턴을 사용해 OS별 기능 변경을 통합적으로 변경할 수 있다. 이처럼 **추상팩토리 패턴은 다양한 구성 요소 별로 "객체의 집합"을 생성해야 할 때 유용한 패턴**이다. 다시 말해서, 서로의 다른 객체들을 하나의 팩토리에서 생성과 관리를 한다고 보면된다.

<br>

### 빌더 패턴 (Builder Pattern) 🏗

빌더 패턴은 **많은 Optional한 멤버 변수(혹은 파라미터)나 지속성 없는 상태 값들에 대해 처리해야 하는 문제들을 해결**한다.

예를 들어, 팩토리 패턴이나 추상 팩토리 패턴에서는 생성해야하는 클래스에 대한 속성 값이 많을 때 아래와 같은 이슈들이 있다.

1.  클라이언트 프로그램으로부터 팩토리 클래스로 많은 파라미터를 넘겨줄 때 타입, 순서 등에 대한 관리가 어려워져 에러가 발생할 확률이 높아진다.
2. 경우에 따라 필요 없는 파라미터들에 대해서 팩토리 클래스에 일일이 null 값을 넘겨줘야 한다.
3. 생성해야 하는 sub class가 무거워지고 복잡해짐에 따라 팩토리 클래스 또한 복잡해진다.

빌더 패턴은 이러한 문제들을 해결하기 위해 별도의 Builder 클래스를 만들어 필수 값에 대해서는 생성자를 통해, 선택적인 값들에 대해서는 메소드를 통해 step-by-step으로 값을 입력받은 후에 build() 메소드를 통해 최종적으로 하나의 인스턴스를 리턴하는 방식이다.

<br>

### 프로토타입 패턴 (Prototype Pattern)🪐

프로토타입 패턴은 미리 만들어진 객체를 복사해서 객체를 생성하는 방식이다. 

- 프로토타입 패턴은, 추상 팩토리 패턴과는 반대로, 클라이언트 응용 프로그램 코드 내에서 객체 창조자(creator)를 서브클래스(subclass)하는 것을 피할 수 있게 해준다.
- 프로토타입 패턴은 일반적인 방법으로 새로운 객체를 생성하는 프로그램에 비해 생성 비용을 피할 수 있다.
- 주의할 점은 반드시 생성하고자 하는 객체의 클래스에서 clone()이 정의되어야 한다.

<br>

### 싱글톤 패턴 (Singleton Pattern)🛫

애플리케이션이 시작될 때, 어떤 클래스가 최초 한 번만 메모리를 할당(static)하고 해당 메모리에 인스턴스를 만들어 사용하는 패턴이다.

즉, 싱글톤 패턴은 '하나'의 인스턴스만 생성하여 사용하는 디자인 패턴이다.

✔ 인스턴스가 필요할 때, 똑같은 인스턴스를 만들지 않고 기존의 인스턴스를 활용하는 것!

생성자가 여러 번 호출돼도 실제로 생성되는 객체는 하나이며, 최초로 생성된 이후에 호출된 생성자는 이미 생성한 객체를 반환시키도록 만드는 것이다. (JAVA에서는 생성자를 private으로 선언해 다른 곳에서 생성하지 못하도록 만들고, getInstance() 메소드를 통해 받아서 사용하도록 구현한다.)

<br>

#### 왜 싱글톤 패턴을 사용하는 거지? 🤨

객체를 생성할 때마다 메모리 영역을 할당받아야 한다. 하지만 **한번의 new를 통해 객체를 생성한다면 메모리 낭비를 방지**할 수 있다. 또한 싱글톤으로 구현한 인스턴스는 '전역'이므로, **다른 클래스의 인스턴스들이 데이터를 공유하는 것이 가능한 장점**이 있다.

<br>

#### 단점도 있나? 🙄

- 만약 싱글톤 인스턴스가 혼자 너무 많은 일을 하거나 많은 데이터를 공유시키면 다른 클래스들 간의 결합도가 높아지게 되는데, 이때 개방-폐쇄 원칙이 위배된다.
- 멀티 스레드 환경에서 동기화 처리를 하지 않았을 때, 인스턴스가 2개가 생성되는 문제도 발생할 수 있다.

<br>

[참고](https://ko.wikipedia.org/wiki/소프트웨어_디자인_패턴)

🌼 팩토리 메소드 패턴 참고 자료

[참고1](https://gmlwjd9405.github.io/2018/08/07/factory-method-pattern.html)

[참고2](https://meylady.tistory.com/59)

🌼 추상 팩토리 패턴 참고 자료

[참고1](https://dev-momo.tistory.com/entry/추상-팩토리-패턴-Abstract-Factory-Pattern)

[참고2](https://meylady.tistory.com/60?category=795226)

🌼 빌더 패턴 참고 자료

[참고1](https://readystory.tistory.com/121)

🌼 프로토타입 패턴 참고 자료

[참고1](https://readystory.tistory.com/122?category=822867)

🌼 싱글톤 패턴 참고 자료

[참고1](https://gyoogle.dev/blog/design-pattern/Singleton%20Pattern.html)

