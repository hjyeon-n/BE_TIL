# MD5와 사용하지 않는 이유 🔐

### ❓ MD5란?

Message-Digest Algorithm 5의 약자

1991년에 로널드 라이베스트가 이전에 쓰이던 MD4를 대체하기 위해 고안된 알고리즘

128비트 암호화 해시 함수이며 주로 프로그램이나 파일이 원본 그대로인지 확인하는 무결성 검사에 이용됨

<br/>

### ❗ MD5 알고리즘

MD5는 임의의 길이의 메시지를 입력받아 128비트 고정 길이의 출력값을 낸다.

입력 메시지는 512 비트 블록들로 쪼개진다.

우선 입력 메시지를 패딩하여 512로 나누어 떨어질 수 있는 길이가 되게 해야 한다.

<br/>

**✔ 입력메시지 패딩법**

1. 첫 단일 비트, 1을 메시지 끝 부분에 추가
2. 512의 배수의 길이보다 64비트 적은 곳 까지 0으로 채움
3. 나머지 64비트는 최초 메시지의 길이를 나타내는 64 비트 정수 값으로 채워짐

<br/>

![image](https://user-images.githubusercontent.com/64277114/90307890-b740b580-df15-11ea-840b-b1fa2cd5a70f.png)

​													(▲ 한 라운드에서 일어나는 연산을 묘사하는 사진)

MD5 알고리즘은 A, B, C, D 라고 이름이 붙은 32비트의  워드 버퍼 네 개로 이루어진 하나의 128 비트 state에 대해 동작한다. 

A, B, C, D는 아래와 같은 소정의 상수값으로 초기화 된다.

| 워드 버퍼 | 상수값     |
| --------- | ---------- |
| A         | 0x01234567 |
| B         | 0x89abcdef |
| C         | 0xfedcba98 |
| D         | 0x76543210 |

하나의 메시지 블록을 처리 하는 것을 4 단계로 나누며, 한 단계를 "라운드" 라고 부른다.

각 라운드는 비선형 함수 F, 모듈라 덧셈, 레프트 로테이션에 기반한 16개의 동일한 연산으로 이루어져 있다.

함수 F에는 네가지가 있으며, 각 라운드마다 다른 F가 쓰인다.

![image](https://user-images.githubusercontent.com/64277114/90308038-fe7b7600-df16-11ea-979b-38b878878b2b.png)

![image](https://user-images.githubusercontent.com/64277114/90308073-4ac6b600-df17-11ea-9278-b5a11c605c12.png)는 각각 XOR, 논리곱, 논리합, NOT 연산을 의미한다.

<br/>

### ❗ MD5가 사용되지 않는 이유

MD5는 리눅스에서 패스워드를 암호화할 때 널리 사용되던 알고리즘이다.

1996년에 처음으로 설계상 결함이 발견되었으며, 2004년에는 더욱 심한 암호화 [결함](https://eprint.iacr.org/2005/067)이 발견되었고, 2006년에는 노트북 한 대의 계산능력으로 1분 내에 해시 충돌을 찾을 정도로 빠른 [알고리즘](https://eprint.iacr.org/2006/105)이 발표되기도 했다.

따라서 현재는 MD5 알고리즘을 보안 관련 용도로 쓰는 것은 권장하지 않으며 SHA 알고리즘으로 대체되어 사용되고 있다.

<br/>

[참고자료](https://ko.wikipedia.org/wiki/MD5)

