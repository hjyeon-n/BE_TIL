# 프로세스 관리 🐱‍🏍

### ❓ 프로세스란?

프로세스는 일반적으로 프로세서(CPU, 처리기)에 의해 처리되는 사용자 프로그램, 시스템 프로그램, 즉 **실행중인 프로그램을 의미**하며 작업(Job), 태스크(Task) 라고도 한다.

<br/>

✔ 프로세스와 프로그램의 차이 

프로그램은 보조 기억장치에 실행 파일 형태로 존재한다. 이 프로그램이 명령어와 정적 데이터가 메모리에 적재되면 생명력을 갖는 프로세스가 되는 것이다.

<br/>

### ❗ 프로세스의 상태전이

![캡처](https://user-images.githubusercontent.com/64277114/89316498-2832d280-d6b7-11ea-8bba-96f43fcf97a6.JPG)

🍉제출(Submit)

* 작업을 처리하기 위해 사용자가 작업을 시스템에 제출한 상태

🍉접수(Hold) 

* 제출된 작업이 스풀 공간인 디스크의 할당 위치에 저장된 상태

🍉준비(Ready)

* 프로세스가 프로세서를 할당받기 위해 기다리고 있는 상태
* 프로세스는 준비상태 큐에서 실행을 준비하고 있다.
* 접수 상태에서 준비 상태로의 전이는 Job 스케줄러에 의해 수행된다.

🍉실행(Run)

* 준비상태 큐에 있는 프로세스가 프로세서를 할당받아 실행되는 상태
* 프로세스 수행이 완료되기 전 프로세스에게 주어진 할당 시간이 종료되면 준비상태로 전이된다.
* 실행중인 프로세스에 입출력(I/O) 처리가 필요하면 실행중인 프로세스는 대기 상태로 전이된다.
* 준비 상태에서 실행 상태로의 전이는 CPU 스케줄러에 의해 수행된다.

🍉대기(Wait)

* 프로세스에 I/O 처리가 필요하면 현재 실행중인 프로세스가 중단되고, I/O 처리가 완료될 때까지 대기하고 있는 상태

🍉종료

* 프로세스의 실행이 끝나고 프로세스 할당이 해제된 상태

<br/>

### ❓ PCB(Process Control Block)란?

PCB는 운영체제가 프로세스에 대한 중요한 정보를 저장해 놓는 곳. (Task Control Block 또는 Job Control Block 이라고도 한다.)

각 프로세스가 생성될 때마다 고유의 PCB가 생성되고, 프로세스가 완료되면 PCB는 제거된다.

🍉PCB에 저장되어 있는 정보

| 저장 정보                       | 설명                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| 프로세스의 현재 상태            | 준비, 대기 실행등의 프로세스 상태                            |
| 포인터                          | 부모 프로세스에 대한 포인터, 자식 프로세스에 대한 포인터, <br/>할당된 자원에 대한 포인터, 프로세스가 위치한 메모리에 대한 포인터 |
| 프로세스 고유 식별자            | 프로세스를 구분할 수 있는 고유의 번호                        |
| 스케줄링 및 프로세스의 우선순위 | 스케줄링 정보 및 프로세스가 실행될 우선순위                  |
| CPU 레지스터 정보               | Accumulator, 인덱스 레지스터, 범용 레지스터, 프로그램 카운터(PC) 등에 대한 정보 |
| 주기억장치 관리 정보            | 기준 레지스터, 페이지 테이블에 대한 정보                     |
| 입출력 상태 정보                | 입출력장치, 개방된 파일 목록                                 |
| 계정 정보                       | CPU 사용 시간, 실제 사용 시간, 한정된 시간                   |

✔ 기준 레지스터: 주기억장치가 분할된 영역으로 나뉘어 관리될 때, 프로그램이 한 영역에서 다른 영역으로 옮겨지더라도 명령의 주소 부분을 바꾸지 않고 정상적으로 수행될 수 있도록 하기 위한 레지스터

✔ 페이지 테이블: 페이징 기법에서 주소 변환을 위해 페이지가 존재하는 주기억장치의 위치 정보를 가지고 있는 테이블

<br/>

### ❗ 프로세스 관리

운영체제는 프로세스들의 실행 사이에 프로세스를 교체하고 재시작할 때 오류가 발생하지 않도록 관리해야 한다. 이를 위해 운영체제는 프로세스들을 상태전이를 통해 체계적으로 관리한다.

프로세스는 프로세서(CPU)가 사용가능한 상태가 되면 CPU를 할당받는다. 이것을 Dispatch라고 하며 Dispatcher가 이 일을 수행한다.  

프로세스는 실행상태에서 CPU를 이용해 연산한 후 CPU를 자발적으로 반납하고 작업이 끝나지 않았으면 다시 준비상태에 들어간다. 운영체제는 다시 준비리스트의 첫번째에 있는 프로세스를 실행상태로 바꾸고 이 과정을 반복한다.

만약 프로세스를 다시 사용하기 전에 입출력이 완료대기를 기다려야 하는 상황이라면 완료될 때까지 자신을 Block한다. 입출력이 완료되면 운영체제가 프로세스를 Block 상태에서 준비상태로 다시 전이시킨다.

<br/>

[참고자료](https://bowbowbow.tistory.com/16)