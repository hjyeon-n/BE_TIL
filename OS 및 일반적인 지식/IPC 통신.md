# IPC 통신 📞

### IPC (Inter Process Communication) 👋

: 자원을 공유하는 스레드와 달리 독립적인 프로세스는 다른 프로세스에게 영향을 받지 않는다. 따라서 별도의 통신이 필요한데 이를 프로세스간 통신 즉, IPC라고 한다. 프로세스간 통신을 위해서는 PIPE가 필요하다. 프로세스 간 데이터를 동기화하고 보호하기 위해 세마포어와 뮤텍스를 사용한다.

➕ 프로세스 간 통신이 어려운 이유

: 우리는 fork와 같은 함수로 프로세스를, pthread_create와 같은 함수로 스레드를 생성해 준다.  프로세스는 생성되면서 * PC 를 포함하여 메모리 공간 등을 복사하여 자원을 할당하지만 스레드는 메모리 공간와 자원들을 공유한다는 차이점이 있다. 따라서 프로세스간 통신을 위해서는 별도의 공간이 필요하다.

<br>

### PIPE 👩‍🚀

PIPE는 통신을 위한 메모리 공간(버퍼)을 생성하여 프로세스가 데이터를 주고 받게 한다. PIPE를 응용하면 외부 프로세스와의 통신에도 사용이 가능하지만 PIPE는 단방향의 통신이라는 단점이 존재한다. 따라서, 일반적으로 2개의 프로세스가 통신을 한다고 할 때 2개의 PIPE를 사용하여 통신을 한다. 하지만 프로세스의 수가 많아질 수록 PIPE로 인한 자원의 낭비가 심해진다.

<br>

### IPC 종류 📢

- #### 익명 파이프 (Anonymous PIPE)

  - 이름이 없기 때문에 외부프로세스에서는 이 파이프를 사용할 수 없다.

  - 부모 프로세스가 자식 프로세스를 생성하는 경우에 파일 지정 번호를 상속 받아 익명파이프로 통신을 할 수 있다.  

  - 두 개의 프로세스를 연결하는데 하나의 프로세스는 데이터를 쓰기만 하고, 다른 하나는 데이터를 읽기만 할 수 있다. (반이중 통신)

    → 양쪽으로 모두 송/수신을 하고 싶으면 2개의 파이프를 만들어야 한다.

    

- #### NAMED PIPE

  - 부모-자식 관계의 프로세스가 아닌, 외부의 프로세스와도 통신이 가능하다.

  - 읽기와 쓰기가 모두 가능하지만 한번에 한 방향으로만 통신이 가능한 반이중통신이기 때문에 전이중 통신을 위해서는 읽기 파이프와 쓰기 파이프 총 2개의 파이프를 생성해야 한다.

    

- #### Message Queue

  - 입출력 방식은 Named 파이프와 동일하다.

  - 메시지 큐는 파이프처럼 데이터의 흐름이 아니라 메모리 공간이다.

  - 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.

    

- #### 공유 메모리 

  - 데이터 자체를 공유하도록 지원하는 설비

  - 프로세스간 메모리 영역을 공유해서 사용할 수 있도록 허용

  - 프로세스가 공유 메모리 할당을 커널에 요청하면, 커널은 해당 프로세스에 메모리 공간을 할당해 주고 이후 모든 프로세스는 해당 메모리 영역에 접근할 수 있게 된다.

  - **중개자 없이 곧바로 메모리에 접근할 수 있어서 IPC 중 가장 빠르다.**

    

- #### 메모리 맵

  - 공유 메모리처럼 메모리를 공유해 준다.

  - 열린 파일을 메모리에 맵핑시켜서 공유하는 방식이다. (즉 공유 매개체가 파일 + 메모리)

  - 주로 대용량 데이터를 공유해야 할 때 사용한다.

    

- ####  소켓

  - 네트워크 소켓 통신을 통해 데이터를 공유한다.
  - 클라이언트와 서버가 소켓을 통해서 통신하는 구조로, 원격에서 프로세스 간 데이터를 공유할 때 사용한다.

  <br>

[참고1](https://gyoogle.dev/blog/computer-science/operation-system/IPC.html)

[참고2](https://mangkyu.tistory.com/9)